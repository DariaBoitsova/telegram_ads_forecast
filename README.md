# Telegram Ads Reach Forecast

## Описание проекта

Веб-приложение для прогнозирования охвата (views) рекламных размещений в Telegram-каналах на основе параметров рекламной кампании.

Проект реализован в формате end-to-end ML-системы:

* обучение модели машинного обучения;
* сохранение и версионирование артефактов;
* REST API на FastAPI;
* веб-интерфейс для пользователей;
* деплой в облаке.

---

## Архитектура проекта

Проект построен модульно, с чётким разделением ответственности компонентов.

```
telegram_ads_forecast/
├── data/                  # Данные для обучения
│   └── train_data.csv
├── models/                # Модели (не хранятся в Git)
├── src/
│   ├── api.py              # FastAPI приложение
│   ├── features.py         # Feature engineering
│   ├── train.py            # Обучение модели
│   └── config.py           # Конфигурации и пути
├── templates/              # HTML-шаблоны
├── requirements.txt
├── README.md
└── .gitignore
```

---

## Data

В репозитории содержится учебный датасет:

```
data/train_data.csv
```

Датасет используется исключительно для:

* обучения модели;
* воспроизводимости экспериментов;
* оценки качества модели.

Файл не содержит персональных данных.

В продакшн-режиме данные не используются — API работает с уже обученной моделью.

---

## Модель

Используется модель **CatBoostRegressor**.

Особенности:

* работа с категориальными признаками;
* предсказание логарифма целевой переменной;
* метрики качества: MAE, RMSE.

Обучение выполняется локально (`src/train.py`).

Файлы модели:

* `catboost_views_model.cbm`
* `channel_stats.pkl`

Не хранятся в GitHub и подгружаются при старте приложения из Google Drive.

---

## API

API реализовано на FastAPI.

Основные эндпоинты:

* `POST /predict` — JSON-запрос для прогнозирования
* `POST /predict_form` — прогнозирование через веб-форму

Пример запроса:

```json
{
  "cpm": 1200,
  "channel": "tech_news",
  "date": "2024-01-15"
}
```

Пример ответа:

```json
{
  "predicted_views": 54000
}
```

---

## Web-интерфейс

Веб-интерфейс позволяет:

* вводить параметры вручную;
* загружать CSV-файл с несколькими размещениями;
* получать прогнозы в табличном виде.

Интерфейс реализован с использованием HTML + Jinja2.

---

## Запуск проекта локально

1. Клонировать репозиторий:

```bash
git clone https://github.com/DariaBoitsova/telegram_ads_forecast.git
cd telegram_ads_forecast
```

2. Создать виртуальное окружение и установить зависимости:

```bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
```

3. Запустить приложение:

```bash
uvicorn src.api:app --reload
```

Приложение будет доступно по адресу:

```
http://127.0.0.1:8000
```

---

## Деплой

Проект развёрнут в облаке (Render).

При старте приложения:

* автоматически скачиваются файлы модели из Google Drive;
* приложение готово к работе без ручной настройки.

---

## Примечания

* Проект разработан в рамках хакатона.
* Архитектура ориентирована на расширяемость и промышленное использование.
